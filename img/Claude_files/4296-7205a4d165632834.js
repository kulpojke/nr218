try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3c14d6b1-f9bf-4602-9e1e-d9bed20873c5",e._sentryDebugIdIdentifier="sentry-dbid-3c14d6b1-f9bf-4602-9e1e-d9bed20873c5")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1417,4296,7535],{12072:(e,n,t)=>{t.d(n,{Tooltip:()=>p});var r=t(42977),a=t(54568),i=t(90510),o=t(91961),l=t(7620),s=t(32987),u=t(37463),d=t(67754);function c(){let e=(0,r._)(["\n  px-2\n  py-1\n  text-xs\n  font-normal\n  font-ui\n  leading-tight\n  rounded-md\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return c=function(){return e},e}function f(){let e=(0,r._)(["\n  max-w-[337px]\n  z-tooltip\n  [*:disabled_&]:hidden\n"]);return f=function(){return e},e}function h(){let e=(0,r._)(["\n  p-1\n  font-small-bold\n  rounded-lg\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return h=function(){return e},e}function g(){let e=(0,r._)(["\n  p-1\n  font-base\n  border-border-300\n  border-0.5\n  rounded-lg\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  text-text-100\n  bg-bg-100\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return g=function(){return e},e}function p(e){let{children:n,tooltipContent:t,contentStyle:r="default",side:i="top",sideOffset:u,align:c,className:f,delayDuration:h=200,keyboardShortcut:g,...p}=e,b=v[r],m=function(e){let n=(0,o.vm)();return(0,l.useMemo)(()=>{if(!e)return"";let t=e.toLowerCase().split("+").map(e=>e.trim()),r=[],a=[];t.forEach(e=>{["cmd","command","meta","ctrl","control","alt","option","shift"].includes(e)?r.push(e):a.push(e)});let i=["ctrl","control","alt","option","shift","cmd","command","meta"],o=[...r.sort((e,n)=>i.indexOf(e)-i.indexOf(n)).map(e=>n?({ctrl:"⌃",control:"⌃",alt:"⌥",option:"⌥",shift:"⇧",cmd:"⌘",command:"⌘",meta:"⌘"})[e]:({ctrl:"Ctrl",control:"Ctrl",alt:"Alt",option:"Alt",shift:"⇧",cmd:"Ctrl",command:"Ctrl",meta:"Ctrl"})[e]),...a.map(e=>{if(n){if("space"===e)return"␣";if("enter"===e||"return"===e)return"⏎";if("delete"===e||"backspace"===e)return"⌫";if("escape"===e||"esc"===e)return"Esc";if("tab"===e)return"⇥";if("up"===e)return"↑";if("down"===e)return"↓";if("left"===e)return"←";if("right"===e)return"→"}else{if("space"===e)return"Space";if("enter"===e||"return"===e)return"Enter";if("delete"===e||"backspace"===e)return"Backspace";if("escape"===e||"esc"===e)return"Esc";if("tab"===e)return"Tab";if("up"===e)return"Up";if("down"===e)return"Down";if("left"===e)return"Left";if("right"===e)return"Right"}return e.match(/^f\d+$/)||1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)})];return n?o.join(""):o.join("+")},[e,n])}(g||"");return(0,a.jsx)(d.Kq,{delayDuration:h,children:(0,a.jsxs)(d.bL,{...p,children:[(0,a.jsx)(d.l9,{asChild:!0,children:n}),(0,a.jsx)(d.ZL,{children:(0,a.jsx)("span",{children:(0,a.jsxs)(b,{className:(0,s.A)(f,!t&&"hidden"),sideOffset:null!=u?u:5,side:i,align:c,children:[t,g&&(0,a.jsx)("span",{className:"ml-1.5 opacity-70",children:m})]})})})]})})}let b=(0,i.J)(d.UC)(c()),m=(0,i.J)(d.UC)(f()),v={default:b,citation:e=>{let{children:n,...t}=e;return(0,a.jsx)(m,{...t,children:(0,a.jsx)(u.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"p-1 font-base text-text-200 bg-bg-100 break-words border-0.5 border-border-300/25 max-h-[300px] shadow-diffused shadow-[hsl(var(--always-black)/4%)] rounded-lg overflow-y-auto",children:n})})},inputMenu:(0,i.J)(d.UC)(h()),sampleImage:(0,i.J)(d.UC)(g())}},15046:(e,n,t)=>{t.d(n,{j:()=>i});var r=t(54568),a=t(32987);function i(e){let{className:n,variant:t,width:i=36,height:l=20,children:s,disableAnimation:u,...d}=e,c="number"==typeof l?"".concat(l,"px"):l,f="number"==typeof i?"".concat(i,"px"):i,h="calc(".concat(c," - 4px)"),g="calc(".concat(f," - ").concat(c,")");return(0,r.jsxs)("div",{className:(0,a.A)("group/switch relative select-none cursor-pointer",n),children:[(0,r.jsx)("input",{type:"checkbox",style:{width:i,height:c},className:"peer sr-only",role:"switch",...d}),(0,r.jsx)("div",{style:{width:i,height:c},className:(0,a.A)("border-border-300 rounded-full peer:can-focus peer-disabled:opacity-50",u&&"!transition-none",o.pill[t||"default"])}),(0,r.jsx)("div",{style:{height:h,width:h,transform:"translateX(".concat(d.checked?g:"0",")")},className:(0,a.A)("absolute flex items-center justify-center start-[2px] top-[2px] rounded-full transition-all",u&&"!transition-none",o.circle[t||"default"]),children:s})]})}let o={pill:{default:"\n    bg-bg-500\n    transition-colors\n    peer-checked:bg-accent-secondary-100\n    ",blackAndWhite:"\n    bg-bg-500  \n    ",dark:"\n    bg-bg-500\n    transition-colors\n    peer-checked:bg-text-100\n    dark:bg-border-200\n    dark:peer-checked:bg-text-500\n    "},circle:{default:"\n    group-hover/switch:opacity-80\n    bg-white\n    transition\n    ",blackAndWhite:"\n    group-hover/switch:opacity-80\n    bg-bg-000\n    transition\n    duration-200\n    ",dark:"\n    group-hover/switch:opacity-80\n    bg-white\n    transition\n    "}}},18179:(e,n,t)=>{t.r(n),t.d(n,{Loading:()=>l});var r=t(54568),a=t(32987),i=t(7620),o=t(62971);let l=(0,i.memo)(function(e){let{size:n="md",fullscreen:t=!1,inheritColor:l,delay:s=0}=e,[u,d]=(0,i.useState)(s>0);return(0,i.useEffect)(()=>{if(!s)return;let e=setTimeout(()=>d(!1),s);return()=>clearTimeout(e)},[s]),(0,r.jsx)("div",{className:(0,a.A)(t?"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2":"m-auto"),children:(0,r.jsx)("div",{className:(0,a.A)("sm"===n&&"h-4 w-4 border-2","md"===n&&"h-20 w-20 border-8",l?"border-current":"border-border-200","text-secondary inline-block animate-spin rounded-full border-solid border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",u&&"hidden"),role:"status",children:(0,r.jsx)("span",{className:"sr-only",children:(0,r.jsx)(o.A,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})})})},18900:(e,n,t)=>{t.d(n,{$D:()=>h,I5:()=>g,ct:()=>S,eG:()=>v,gn:()=>p,iB:()=>f,oz:()=>b});var r=t(77186),a=t(1761),i=t(71473),o=t(27062),l=t(75632),s=t(48721),u=t(87606),d=t(7620),c=t(75006);function f(){let{value:e}=(0,o.fS)("bad_moon_rising");return e}let h=()=>{let{activeOrganization:e}=(0,a.YL)(),n=null==e?void 0:e.uuid;return(0,r.Sk)("/v1/sessions/organizations/".concat(n,"/sessions"),{queryKey:[i.Rv,{orgUUID:n}],enabled:!!e,staleTime:3e4,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function g(e,n){return{uuid:(0,l.N)(),session_id:n,type:"user",parent_tool_use_id:null,message:{role:"user",content:e}}}let p=e=>{let{activeOrganization:n}=(0,a.YL)(),t=null==n?void 0:n.uuid;return(0,r.Sk)("/v1/sessions/organizations/".concat(t,"/sessions/").concat(e),{queryKey:[i.Ex,{orgUUID:t,sessionId:e}],enabled:!!n,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function b(){let e=m(),n=(0,o.T9)("bad_moon_rising_config","environment_id","",c.z.string()),t=(0,o.T9)("bad_moon_rising_config","cwd","",c.z.string());return(0,d.useCallback)(r=>{let{initialMessage:a,gitRepoUrl:i,gitBranch:o}=r,l=[];return a&&l.push({type:"event",data:a}),e.mutateAsync({events:l,environment_id:n,session_context:{cwd:t,sources:[{type:"git_repository",url:i}],outcomes:[{type:"git_repository",git_info:{type:"github",repo:i.split("github.com/")[1],branches:[o]}}]}})},[e,n,t])}let m=()=>{let{activeOrganization:e}=(0,a.YL)(),n=(0,u.useQueryClient)(),t=null==e?void 0:e.uuid;return(0,r.L2)("/v1/sessions/organizations/".concat(t,"/sessions"),"POST",{onSuccess:()=>{n.invalidateQueries({queryKey:[i.Rv,{orgUUID:t}]})},meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function v(){let{activeOrganization:e}=(0,a.YL)(),n=null==e?void 0:e.uuid;return(0,r.L2)("/api/organizations/".concat(n,"/dust/generate_title_and_branch"),"POST")}let y=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="/v1/sessions/ws/organizations/".concat(e,"/sessions/").concat(n,"/subscribe");t.replay&&(r+="?replay=true");let a="https:"===window.location.protocol?"wss:":"ws:";return"".concat(a,"//").concat(window.location.host).concat(r)};function w(e){return{data:e.data.map(e=>"cc_sdk"===e.type?e.data:e),has_more:e.has_more,first_id:e.first_id,last_id:e.last_id}}let _=function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:t}=(0,a.YL)(),o=null==t?void 0:t.uuid;return(0,r.Sk)("/v1/sessions/organizations/".concat(o,"/sessions/").concat(e,"/events"),{queryKey:[i.ri,{orgUUID:o,sessionId:e}],enabled:!!t&&n,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}},w)};class x{[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){return this.queue.length>0?Promise.resolve({done:!1,value:this.queue.shift()}):this.isDone?Promise.resolve({done:!0,value:void 0}):this.hasError?Promise.reject(this.hasError):new Promise((e,n)=>{this.readResolve=e,this.readReject=n})}enqueue(e){if(this.readResolve){let n=this.readResolve;this.readResolve=void 0,this.readReject=void 0,n({done:!1,value:e})}else this.queue.push(e)}done(){if(this.isDone=!0,this.readResolve){let e=this.readResolve;this.readResolve=void 0,this.readReject=void 0,e({done:!0,value:void 0})}}error(e){if(this.hasError=e,this.readReject){let n=this.readReject;this.readResolve=void 0,this.readReject=void 0,n(e)}}return(){return this.isDone=!0,this.returned&&this.returned(),Promise.resolve({done:!0,value:void 0})}constructor(e){this.returned=e,this.queue=[],this.isDone=!1,this.started=!1}}function S(e){let{data:n,isLoading:t,refetch:r}=_(e,!1),{inputStream:i,streamedMessages:o}=function(e,n){let t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=(0,d.useRef)(null),o=(0,d.useRef)(null),l=(0,d.useRef)(null),[u,c]=(0,d.useState)([]);(0,d.useEffect)(()=>{c([])},[e]);let{activeOrganization:f}=(0,a.YL)(),h=null==f?void 0:f.uuid,g=(0,d.useCallback)(()=>{o.current&&(o.current.abort(),o.current=null),l.current&&(l.current.done(),l.current=null),i.current=null},[]),p=(0,d.useCallback)(()=>{if(!t||!h||!e)return;g(),o.current=new AbortController,l.current=new x;let a=(0,s.P)({prompt:l.current,websocket:{url:y(h,e)},abortController:o.current});(async()=>{try{for await(let n of a){if("result"===n.type&&"granted"===Notification.permission){let n=localStorage.getItem("session-title-".concat(e)),t=new Notification(n?"Claude updated ".concat(n):"Update from Claude",{body:"Your task is ready for review",icon:"/favicon.svg",badge:"/favicon.svg"});t.onclick=()=>{window.focus(),t.close()}}c(e=>[...e,n])}}catch(e){r&&e instanceof Error&&"WebSocket connection aborted by user"!==e.message&&p()}})(),n(),i.current=a},[t,h,e,g,n,r]);return(0,d.useEffect)(()=>{p()},[p]),(0,d.useEffect)(()=>()=>g(),[g]),{inputStream:l.current,streamedMessages:u}}(e,r),l=(0,d.useMemo)(()=>t||!n?[]:n.data,[t,n]),u=(0,d.useMemo)(()=>{let e=new Set;for(let n of l)e.add(n.uuid);return e},[l]);return{loadingInitialMessages:t,inputStream:i,messages:(0,d.useMemo)(()=>{let e=[...l];for(let n of o)n.uuid&&!u.has(n.uuid)&&e.push(n);return e},[l,u,o])}}},41417:(e,n,t)=>{t.d(n,{$:()=>h});var r=t(54568),a=t(18179),i=t(12072),o=t(615),l=t(32987),s=t(27261),u=t.n(s),d=t(7620);let c="\n    text-text-000\n    font-base-bold\n    border-0.5\n    border-border-200\n    relative\n    overflow-hidden\n    transition\n    duration-100\n    hover:border-border-300/0\n    bg-bg-300/0\n    hover:bg-bg-400\n    backface-hidden",f=(0,o.F)("inline-flex\n  items-center\n  justify-center\n  relative\n  shrink-0\n  can-focus\n  select-none\n  disabled:pointer-events-none\n  disabled:opacity-50\n  disabled:shadow-none\n  disabled:drop-shadow-none",{variants:{variant:{primary:"bg-text-000\n        text-bg-000\n        font-base-bold\n        relative\n        overflow-hidden\n        transition-transform\n        will-change-transform\n        ease-[cubic-bezier(0.165,0.85,0.45,1)]\n        duration-150\n        hover:scale-y-[1.015]\n        hover:scale-x-[1.005]\n        backface-hidden\n        after:absolute\n        after:inset-0\n        after:bg-[radial-gradient(at_bottom,hsla(var(--bg-000)/20%),hsla(var(--bg-000)/0%))]\n        after:opacity-0\n        after:transition\n        after:duration-200\n        after:translate-y-2\n        hover:after:opacity-100\n        hover:after:translate-y-0",flat:"bg-accent-main-000\n          text-oncolor-100\n          font-base-bold\n          transition-colors\n          hover:bg-accent-main-200\n          focus:!outline-accent-main-100/75",secondary:c,outline:c,ghost:"text-text-300\n          border-transparent\n          transition\n          font-ui\n          tracking-tight\n          duration-300\n          ease-[cubic-bezier(0.165,0.85,0.45,1)]\n          hover:bg-bg-300\n          aria-checked:bg-bg-400\n          aria-expanded:bg-bg-400\n          hover:text-text-100\n          aria-pressed:text-text-100\n          aria-checked:text-text-100\n          aria-expanded:text-text-100",underline:"opacity-80\n          transition-all\n          active:scale-[0.985]\n          hover:opacity-100\n          hover:underline\n          underline-offset-3\n          rounded",danger:"bg-danger-200\n          text-oncolor-100\n          font-base-bold\n          transition\n          hover:scale-y-[1.015]\n          hover:scale-x-[1.005]\n          hover:opacity-95\n          focus:!outline-danger-100/50",unstyled:""},size:{default:"h-9 px-4 py-2 rounded-lg min-w-[5rem] active:scale-[0.985] whitespace-nowrap",sm:"h-8 rounded-md px-3 min-w-[4rem] active:scale-[0.985] whitespace-nowrap !text-xs",lg:"h-11 rounded-[0.6rem] px-5 min-w-[6rem] active:scale-[0.985] whitespace-nowrap !text-base",icon:"h-9 w-9 rounded-md active:scale-95 shrink-0",icon_xs:"h-6 w-6 rounded-md active:scale-95",icon_sm:"h-8 w-8 rounded-md active:scale-95",icon_lg:"h-11 w-11 rounded-[0.6rem] active:scale-95",inline:"px-0.5 rounded-[0.25rem]",unset:""},option:{rounded:"!rounded-full",prepend:"",append:""},state:{active:""}},compoundVariants:[{size:"default",option:"prepend",class:"pl-2 pr-3 gap-1"},{size:"lg",option:"prepend",class:"pl-2.5 pr-3.5 gap-1"},{size:"sm",option:"prepend",class:" pl-2 pr-2.5 gap-1"},{size:"default",option:"append",class:"pl-3 pr-2 gap-1"},{size:"lg",option:"append",class:"pl-3.5 pr-2.5 gap-1"},{size:"sm",option:"append",class:"pl-2.5 pr-2 gap-1"},{variant:"ghost",state:"active",class:"!bg-bg-400"}],defaultVariants:{variant:"primary",size:"default"}}),h=(0,d.forwardRef)((e,n)=>{let{className:t,variant:o,size:s,option:d,loading:c,href:h,onLinkClick:g,target:p,prepend:b,append:m,state:v,disabled:y,children:w,type:_="button",tooltip:x,tooltipSide:S="bottom",tooltipDelay:k,tooltipDisabled:j,tooltipHoverable:E=!1,...L}=e;b&&(d="prepend"),m&&(d="append");let C=(0,l.A)(f({variant:o,size:s,option:d,state:v,className:t}),c&&"text-transparent ![text-shadow:_none]"),I=(0,r.jsxs)(r.Fragment,{children:[c&&(0,r.jsx)("div",{className:(0,l.A)("absolute inset-0 flex items-center justify-center",o&&"flat"!==o&&"danger"!==o?"secondary"===o?"text-text-400":"text-bg-300":"text-bg-000"),children:(0,r.jsx)(a.Loading,{size:"sm",inheritColor:!0,delay:0})}),b,w,m]}),z=h?(0,r.jsx)(u(),{href:h,target:p||"_self",className:C,"aria-label":L["aria-label"],onClick:g,children:I}):(0,r.jsx)("button",{className:C,ref:n,disabled:y||c,type:_,...L,children:I});return x?(0,r.jsx)(i.Tooltip,{tooltipContent:x,side:S,delayDuration:k,disableHoverableContent:!E,children:(0,r.jsx)("div",{className:"w-fit",children:z})}):z});h.displayName="Button"},45078:(e,n,t)=>{t.d(n,{rX:()=>w,v2:()=>m,vP:()=>y});var r=t(68096),a=t(7726),i=t(70958),o=t(98518),l=t(1761),s=t(27062),u=t(77101),d=t(85544),c=t(7620),f=t(93770),h=t(75973),g=t(85717),p=t(57934),b=t(45715);let m=()=>{let{initGithubAuth:e}=(0,p.nB)(),{initDriveAuth:n}=(0,g.cI)();return t=>{t===u.v8.GITHUB?e():t===u.v8.GDRIVE?n():t===u.v8.OUTLINE&&(0,b.so)()}},v=()=>{let{value:e}=(0,s.fS)("claudeai_paprika_sticky"),n=["enabled_web_search","enabled_bananagrams","enabled_sourdough","enabled_foccacia","enabled_mcp_tools"];return e&&n.push("paprika_mode"),n},y=e=>{let n=(0,f.jw)(),{pendingConversationSettings:t}=(0,f.Fj)(),{account:r}=(0,l.YL)(),a=v();if((0,i.u9)(),n){var o;return null==(o=n.conversationSettings)?void 0:o[e]}return a.includes(e)?null==r?void 0:r.settings[e]:null==t?void 0:t[e]},w=()=>{let e=(0,f.jw)(),{setPendingConversationSettings:n}=(0,f.Fj)(),{account:t}=(0,l.YL)(),i=v(),{isInBeam:s,beamConversationSettings:u,setBeamConversationSettings:g}=(0,h.d)(),{track:p}=(0,o.st)(),{mutate:b}=(0,r.Jy)(),{mutate:m}=(0,a.HF)(null==e?void 0:e.id),y=(0,c.useCallback)(r=>{if(!t)return;e?m({settings:{...r}}):s&&g&&g({...u,...r});let a={},o=!1;Object.keys(r).forEach(t=>{let l=r[t];i.includes(t)?(Object.assign(a,{[t]:l}),o=!0):d.W$.includes(t)&&!e&&n({[t]:l}),p({event_key:"claudeai.conversation.setting.toggled",conversation_uuid:(null==e?void 0:e.id)||null,setting:t,value:l})}),o&&b({...t.settings,...a})},[t,e,m,s,g,u,i,b,p,n]);return{toggleConversationSetting:(0,c.useCallback)((e,n)=>{y({[e]:n})},[y]),batchToggleConversationSettings:y}}},45564:(e,n,t)=>{t.d(n,{Q:()=>s,t:()=>u});var r=t(54568),a=t(89256),i=t.n(a),o=t(7620);let l=(0,o.createContext)({isOpen:!1,dropdownToOpen:void 0,openModal:i(),closeModal:i(),clearCallerIdentifier:i()}),s=e=>{let{children:n}=e,[t,a]=(0,o.useState)(!1),i=(0,o.useRef)(void 0),[s,u]=(0,o.useState)(void 0);return(0,r.jsx)(l.Provider,{value:{isOpen:t,openModal:e=>{a(!0),i.current=e},closeModal:()=>{a(!1),u(i.current)},dropdownToOpen:s,clearCallerIdentifier:()=>{u(void 0)}},children:n})},u=()=>(0,o.useContext)(l)},45715:(e,n,t)=>{t.d(n,{AI:()=>u,I5:()=>d,n0:()=>s,qp:()=>c,so:()=>f});var r=t(77186),a=t(1761),i=t(71473);t(77101);var o=t(87606);t(7620);var l=t(91768);let s=e=>{let{uri:n}=e,{data:t,isLoading:o}=(e=>{let{documentId:n}=e,{account:t,activeOrganization:o}=(0,a.YL)(),l=null==t?void 0:t.uuid,s=null==o?void 0:o.uuid,d=u();return(0,r.Sk)("/api/organizations/".concat(s,"/sync/mcp/outline/document/").concat(n),{queryKey:[i.hq,{accountUUID:l,orgUUID:s,documentId:n}],enabled:d})})({documentId:n});return{title:null==t?void 0:t.title,isLoading:o}},u=()=>{let{data:e}=(0,l.LN)();return!1},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,a.YL)(),o=null==t?void 0:t.uuid,l=u(),{data:s,refetch:d}=(0,r.Sk)("/api/organizations/".concat(o,"/sync/mcp/outline/auth"),{queryKey:[i.iP,{accountUUID:null==n?void 0:n.uuid,orgUUID:o}],enabled:!!(t&&l),staleTime:5e3}),{mutate:c,isPending:f}=(0,r.L2)("/api/organizations/".concat(o,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(t&&l),...e,onSuccess:function(){for(var n,t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];null==(n=e.onSuccess)||n.call(e,...r)}});return{isOutlineAuthenticated:!!(null==s?void 0:s.is_authenticated),refetch:d,initOutlineAuth:c,isLoadingOutlineAuthInit:f}},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,a.YL)(),l=null==n?void 0:n.uuid,s=null==t?void 0:t.uuid,d=u(),c=(0,o.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(s,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(t&&d),...e,onSuccess:function(){for(var n,t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];c.invalidateQueries({queryKey:[i.iP,{accountUUID:l,orgUUID:s}]}),null==(n=e.onSuccess)||n.call(e,...r)}})},f=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/connectors?redirect_url=".concat(e,"&open_outline_auth=true")}},46127:(e,n,t)=>{t.d(n,{Vc:()=>o,Wz:()=>i});var r=t(30686),a=t(7620);function i(e,n){return(0,r.F)({key:"SSS-".concat(e),defaultValue:n,serialize:JSON.stringify,deserialize:e=>void 0===e?n:JSON.parse(e)})}function o(e,n){return function(e){var n,t,r;let{key:i,defaultValue:o,deserialize:l=JSON.parse,getInitialValueInEffect:s=!1,sync:u=!0}=e,d="LSS-".concat(i),c=(0,a.useRef)(null!=(r=null==(n=(t=crypto).randomUUID)?void 0:n.call(t))?r:"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2))),f=(0,a.useRef)(!1),[h,g]=(0,a.useState)(()=>{if(s)return o;try{let e=window.localStorage.getItem(d);if(e){let n=JSON.parse(e);if(n&&"object"==typeof n&&"value"in n)return n.value;return l(e)}}catch(e){console.warn("Error reading localStorage key “".concat(d,"”:"),e)}return o});(0,a.useEffect)(()=>{if(s)try{let e=window.localStorage.getItem(d);if(e){let n=JSON.parse(e);n&&"object"==typeof n&&"value"in n?g(n.value):g(l(e))}}catch(e){console.warn("Error reading localStorage key “".concat(d,"”:"),e)}},[d,l,s]);let p=(0,a.useCallback)(e=>{f.current=!0,g(n=>{let t="function"==typeof e?e(n):e;try{let e={value:t,tabId:c.current,timestamp:Date.now()},n=JSON.stringify(e);if(window.localStorage.setItem(d,n),u){let e=new StorageEvent("storage",{key:d,newValue:n,oldValue:window.localStorage.getItem(d),storageArea:window.localStorage,url:window.location.href});window.dispatchEvent(e)}}catch(e){console.warn("Error writing localStorage key “".concat(d,"”:"),e)}return t}),Promise.resolve().then(()=>{f.current=!1})},[d,u]),b=(0,a.useCallback)(()=>{window.localStorage.removeItem(d),g(o)},[d,o]);return(0,a.useEffect)(()=>{if(!u)return;let e=e=>{if(e.key===d&&e.newValue&&!f.current)try{let n=JSON.parse(e.newValue);if(n&&"object"==typeof n&&"value"in n&&"tabId"in n){if(n.tabId===c.current)return;g(n.value)}else g(l(e.newValue))}catch(e){console.warn("Error handling storage event for “".concat(d,"”:"),e)}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[d,u,l]),[h,p,b]}({key:e,defaultValue:n,deserialize:e=>void 0===e?n:JSON.parse(e),getInitialValueInEffect:!1,sync:!0})}},56370:(e,n,t)=>{t.d(n,{AM:()=>w,Bi:()=>x,DG:()=>N,FV:()=>A,MS:()=>j,Wn:()=>T,cm:()=>E,ms:()=>y,o_:()=>L,q:()=>z,tJ:()=>I});var r=t(42977),a=t(54568),i=t(90510),o=t(52198),l=t(32987),s=t(26631),u=t(7620);function d(){let e=(0,r._)(["\n  outline-none\n  py-2\n  px-1.5\n  -mx-1\n  -mt-1\n  mb-1\n  border-b-0.5\n  border-border-300\n"]);return d=function(){return e},e}function c(){let e=(0,r._)(["\n  z-dropdown\n  bg-bg-000\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-xl\n  min-w-[8rem]\n  overflow-hidden\n  p-1.5\n  text-text-300\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  max-h-[min(var(--radix-dropdown-menu-content-available-height),var(--dropdown-max-height))]\n  overflow-y-auto\n"]);return c=function(){return e},e}function f(){let e=(0,r._)(["\n  rounded\n  py-1\n  px-2\n  max-w-full\n  whitespace-nowrap\n  text-ellipsis\n  overflow-hidden\n"]);return f=function(){return e},e}function h(){let e=(0,r._)(["text-text-500 pt-1 px-2"]);return h=function(){return e},e}function g(){let e=(0,r._)(["\n  font-base  \n  py-1.5\n  px-2\n  rounded-lg\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-200\n  [&[data-highlighted]]:text-text-000\n  ","\n  ","\n"]);return g=function(){return e},e}function p(){let e=(0,r._)(["\n  py-1.5\n  px-2\n  rounded-lg\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  flex\n  justify-between\n  gap-2\n  items-center\n"]);return p=function(){return e},e}function b(){let e=(0,r._)(["\n  py-1.5\n  px-2\n  rounded-lg\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-200\n  [&[data-highlighted]]:text-text-300\n"]);return b=function(){return e},e}function m(){let e=(0,r._)(["\n  z-dropdown\n  bg-bg-000\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-xl\n  min-w-[8rem]\n  overflow-hidden\n  p-1\n  text-text-300\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  overflow-y-scroll\n  max-h-[min(100vh,var(--dropdown-max-height))]\n"]);return m=function(){return e},e}function v(){let e=(0,r._)(["\n  h-0\n  border-t-0.5\n  border-border-300\n  m-1\n"]);return v=function(){return e},e}function y(e){let{trigger:n,children:t,unstyledTrigger:r=!1,...i}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(_,{...i,trigger:r?(0,a.jsx)(s.l9,{asChild:!0,children:n}):(0,a.jsx)(k,{asChild:!0,children:n}),children:t})})}function w(e){let{children:n,open:t,mainButtonText:r,onClickMainButton:i,align:u="end",...d}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(_,{...d,align:u,trigger:(0,a.jsxs)("div",{className:"flex h-8 whitespace-nowrap",children:[(0,a.jsx)("button",{className:(0,l.A)("font-base-bold !text-xs rounded-l-lg bg-bg-000 h-full flex items-center justify-center px-2 border-y border-l border-border-300 hover:bg-bg-200",t&&"bg-bg-200"),onClick:i,children:r}),(0,a.jsx)(s.l9,{asChild:!0,children:(0,a.jsx)("button",{className:"bg-bg-000 flex items-center justify-center px-1 hover:bg-bg-200 rounded-r-lg border border-border-300",children:(0,a.jsx)(o.bi,{size:16})})})]}),children:n})})}function _(e){var n;let{matchTriggerWidth:t=!1,children:r,open:i,onOpenChange:o,trigger:l,...u}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(s.bL,{open:i,onOpenChange:o,children:[l,(0,a.jsx)(s.ZL,{children:(0,a.jsx)(S,{style:t?{width:"var(--radix-dropdown-menu-trigger-width)"}:void 0,sideOffset:null!=(n=u.sideOffset)?n:4,...u,children:r})})]})})}let x=(0,i.J)(s.lp)(d()),S=(0,i.J)(s.UC)(c()),k=(0,i.J)(s.l9)(f());s.I;let j=s.Pb,E=s.ZL,L=(0,i.J)(s.lp)(h()),C=(0,i.J)(s.q7)(g(),e=>{let{disabled:n}=e;return n&&"\n    opacity-50\n    pointer-events-none\n  "},e=>{let{danger:n}=e;return n&&"\n    !text-danger-000\n    [&[data-highlighted]]:bg-danger-900\n  "}),I=u.forwardRef((e,n)=>{let{children:t,icon:r,...i}=e;return r?(0,a.jsx)(C,{ref:n,...i,children:(0,a.jsxs)("div",{className:"flex items-center gap-2.5 w-full py-0.5 text-sm group",children:[r,(0,a.jsx)("span",{children:t})]})}):(0,a.jsx)(C,{ref:n,...i,children:t})});I.displayName="DropdownItem";let z=i.J.div(p()),T=(0,i.J)(s.ZP)(b()),A=(0,i.J)(s.G5)(m()),N=(0,i.J)(s.mB)(v())},57934:(e,n,t)=>{t.d(n,{tn:()=>x,nB:()=>b,rW:()=>m,Cq:()=>v,JR:()=>_,b4:()=>y,yL:()=>w});var r=t(77186),a=t(1761),i=t(71473),o=t(77101),l=t(90119),s=t(87606),u=t(62942),d=t(7620),c=t(18900);async function f(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{fallbackDelayMs:t=1e3,allowedDomains:r=[]}=n;if(!function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{let t=new URL(e,window.location.origin);if(t.origin===window.location.origin)return!0;if(n.length>0)return"https:"===t.protocol&&n.some(e=>t.hostname===e||t.hostname.endsWith(".".concat(e)));return!1}catch(e){return!1}}(e,r))throw Error("Invalid redirect URL: ".concat(e));try{let n=window.open(e,"_blank","noopener,noreferrer");if(!n||n.closed||void 0===n.closed)return await new Promise(e=>setTimeout(e,t)),window.location.href=e,!1;return!0}catch(n){return await new Promise(e=>setTimeout(e,t)),window.location.href=e,!1}}var h=t(91768),g=t(40459);let p="github_success",b=function(){var e;let{callerIdentifier:n,toggleGithubModalOpen:t,fetchImmediately:o=!1,pathname:s,queryString:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:g}=(0,a.YL)(),b=null==g?void 0:g.uuid,m=v(),[y,w]=(0,d.useState)(o),_=(e=>{let{shouldFetch:n=!1}=e,{activeOrganization:t}=(0,a.YL)(),o=null==t?void 0:t.uuid,l=v();return(0,r.Sk)("/api/organizations/".concat(o,"/sync/github/auth"),{queryKey:[i.Hv,{orgUUID:o}],enabled:!!(n&&t&&l)})})({shouldFetch:y}),x=(0,d.useCallback)(async()=>{var e,n;return y?null==(n=_.data)?void 0:n.is_authenticated:(w(!0),null==(e=(await _.refetch()).data)?void 0:e.is_authenticated)},[_,y]),{mutate:S}=(0,r.L2)("/api/organizations/".concat(b,"/sync/github/auth/start"),"POST",{enabled:!!(g&&m),onSuccess:e=>{f(e.redirect_url,{allowedDomains:["github.com","api.github.com"]})}}),k="".concat(p,"=").concat(n).concat(c?"&".concat(c):"");(0,h.FZ)({callerIdentifier:n,successParam:p,handleOpen:()=>{null==t||t(!0)}});let j=(0,u.useSearchParams)(),E=(0,l.V)(),L=(0,d.useRef)(!1),C=(0,u.usePathname)(),I=(0,h.dH)({pathname:s||C,searchParams:j,queryString:k,isClaudeApp:E});return{checkIsGithubAuthenticated:x,initGithubAuth:()=>{if(m){if(E)return void window.open("/settings/connectors?open_in_browser=1&auth_start=github&origin=".concat(I));L.current||(L.current=!0,S({pre_auth_state:{origin:I}}))}},isGithubAuthenticated:null==(e=_.data)?void 0:e.is_authenticated,isLoading:_.isLoading}},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.YL)(),t=null==n?void 0:n.uuid,o=v(),l=(0,s.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(t,"/sync/github/auth"),"DELETE",{enabled:!!(n&&o),...e,onSuccess:function(){for(var n,r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];l.invalidateQueries({queryKey:[i.Hv,{orgUUID:t}]}),null==(n=e.onSuccess)||n.call(e,...a)}})},v=()=>{let{data:e}=(0,h.LN)(),n=(0,a.mV)(),t=!!(Array.isArray(e)&&e.find(e=>e.type===o.v8.GITHUB&&e.enabled));return!!(!g.env.NEXT_PUBLIC_DISABLE_GITHUB_INTEGRATION&&(!n||t))},y=()=>{let{activeOrganization:e}=(0,a.YL)(),n=null==e?void 0:e.uuid,t=v();return(0,r.Sk)("/api/organizations/".concat(n,"/sync/github/repos"),{queryKey:[i.jL,{orgUUID:n}],enabled:!!(e&&t),meta:{noToast:!0}})},w=()=>{let{activeOrganization:e}=(0,a.YL)(),n=null==e?void 0:e.uuid,t=v();return(0,r.Sk)("/api/organizations/".concat(n,"/code/repos"),{queryKey:["SYNC_GH_REPOS_WITH_STATUS_QUERY_KEY",{orgUUID:n}],enabled:!!(e&&n&&t),meta:{noToast:!0}})};function _(){let e=(0,c.iB)();return(0,d.useCallback)(n=>{var t,r,a;return e?null==(t=n.status)?void 0:t.app_installed:(null==(r=n.status)?void 0:r.workflow_enabled)===!0&&(null==(a=n.status)?void 0:a.app_installed)===!0},[e])}let x=e=>{var n;let{owner:t,repo:o,branch:l}=e,s=(e=>{let{owner:n,repo:t,branch:o}=e,{activeOrganization:l}=(0,a.YL)(),s=null==l?void 0:l.uuid,u=v(),d=new URLSearchParams({owner:null!=n?n:"",repo:null!=t?t:""}).toString();return(0,r.Sk)("/api/organizations/".concat(s,"/sync/github/repo?").concat(d),{queryKey:[i.yB,{orgUUID:s,owner:n,repo:t}],enabled:!!(n&&t&&!o&&l&&u),meta:{noToast:!0}})})({owner:t,repo:o,branch:l}),u=(e=>{let{owner:n,repo:t,branch:o}=e,{activeOrganization:l}=(0,a.YL)(),s=null==l?void 0:l.uuid,u=v();return(0,r.Sk)("/api/organizations/".concat(s,"/sync/github/repo/").concat(n,"/").concat(t,"/tree/").concat(o),{queryKey:[i.o6,{orgUUID:s,owner:n,repo:t,branch:o}],staleTime:3e5,enabled:!!(n&&t&&o&&l&&u),meta:{noToast:!0}})})({owner:t,repo:o,branch:l||(null==(n=s.data)?void 0:n.default_branch)});return{data:{repo:s.data,tree:u.data},isFetching:s.isFetching||u.isFetching,error:s.error||u.error}}},63246:(e,n,t)=>{t.d(n,{Ah:()=>o,Bs:()=>a,NJ:()=>i,VH:()=>r,Xs:()=>s,u5:()=>l});let r=e=>{let{account:n,isClaudeDot:t}=e;return t?!1===n.settings.has_finished_claudeai_onboarding:!n.full_name||!n.display_name},a=(e,n)=>n&&!e.is_verified,i=(e,n)=>!!function(e,n){for(let t of e.invites)if(t.organization.capabilities&&t.organization.capabilities.includes(n))return t}(e,n?"raven":"api"),o=(e,n)=>!n&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,l=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t&&n&&!e.age_is_verified},s=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r({account:e,isClaudeDot:n})||a(e,n)||i(e,n)||o(e,n)||l(e,n,t)}},69916:(e,n,t)=>{t.d(n,{ErrorSegmentConnector:()=>E,ErrorsProvider:()=>x,i:()=>L,Y:()=>S});var r=t(54568),a=t(63246),i=t(27062),o=t(44180),l=t(90819),s=t.n(l),u=t(58648),d=t.n(u),c=t(26836),f=t.n(c),h=t(62942),g=t(7620),p=t(75006),b=t(98518),m=t(1761);function v(e,n){let t=[];for(let r of e){if(null==r)continue;let e=y(r,n+1);""!==e&&t.push(e)}return t.length>0?t.join(" "):""}function y(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n>5?"":e instanceof Error?e.message:"string"==typeof e||"number"==typeof e||"boolean"==typeof e?String(e):g.isValidElement(e)?function e(n,t){var r;let a=n.props;return"object"==typeof a&&null!==a&&"defaultMessage"in a&&"string"==typeof a.defaultMessage?a.defaultMessage:"object"==typeof a&&null!==a&&"children"in a?(r=a.children,"string"==typeof r||"number"==typeof r||"boolean"==typeof r?String(r):null==r?"":Array.isArray(r)?v(r,t+1):g.isValidElement(r)?e(r,t+1):y(r,t+1)):""}(e,n):Array.isArray(e)?v(e,n):""}var w=t(46127);let _=(0,g.createContext)(void 0);function x(e){let{children:n}=e,t=(0,g.useRef)(1),[a,i]=(0,g.useState)([]),l=(0,g.useRef)(null),s=(0,g.useRef)([]),u=(0,g.useCallback)(e=>{l.current=e,s.current.forEach(n=>{e(n,void 0)}),s.current=[]},[]),d=(0,g.useCallback)(async e=>{if(null!==l.current)return l.current(e);s.current.push(e)},[]),c=(0,g.useCallback)(e=>{i(n=>n.filter(n=>n.id!==e))},[]),f=(0,g.useCallback)((e,n)=>{let r=t.current++,{timeout:a,error:l,errorContext:s}=n||{};return!function(e){var n;let{userFacingMessage:t,error:r,toastId:a,errorContext:i,track:l}=e,s=y(t),u=s?"".concat(s.substring(0,200)).concat(s.length>200?"...":""):"User-facing error toast",d=s?"User-facing error toast: ".concat(u):"User-facing error toast";l({event_key:"claudeai.user_facing_error.shown",error_message:u,toast_id:a,error_type:r instanceof Error?r.name:typeof r,error_source:(null==i||null==(n=i.tags)?void 0:n.source)||"unknown",has_original_error:!!r,original_error_message:r instanceof Error?r.message.substring(0,200):void 0,error_stack_trace:(e=>{if(e instanceof Error&&e.stack)return e.stack.split("\n").slice(0,3).join("\n").substring(0,500)})(r),error_code:(e=>{if(e instanceof Error&&"code"in e)return String(e.code)})(r),error_status_code:(e=>{if(e instanceof Error){if("statusCode"in e&&"number"==typeof e.statusCode)return e.statusCode;if("status"in e&&"number"==typeof e.status)return e.status}})(r),offline_status:"undefined"!=typeof navigator?!navigator.onLine:void 0});let c=(null==i?void 0:i.tags)||{},f=(null==i?void 0:i.extra)||{};if(r instanceof Error){let e=Error(d);e.stack=r.stack,(0,o.Cp)(e,{tags:{source:"error-toast",...c},extra:{toastId:a,originalErrorMessage:r.message,originalError:r,...f}})}else r?(0,o.Cp)(Error(d),{tags:{source:"error-toast",errorType:typeof r,...c},extra:{toastId:a,originalError:r,...f}}):(0,o.Cp)(Error(d),{tags:{source:"error-toast",errorType:"string"==typeof t?"string":"react-element",...c},extra:{toastId:a,extractedText:d,...f}})}({userFacingMessage:e,error:l,toastId:r,errorContext:s,track:d}),i(n=>[...n,{id:r,message:e,toastType:"error"}]),a&&setTimeout(()=>c(r),a),r},[c,d]),h=(0,g.useCallback)((e,n)=>{let r=t.current++;return i(n=>[...n,{id:r,message:e,toastType:"success"}]),n&&setTimeout(()=>c(r),n),r},[c]),p=(0,g.useMemo)(()=>({toasts:a,addError:f,addSuccess:h,clearToast:c,registerSegmentTracker:u}),[a,f,h,c,u]);return(0,r.jsx)(_.Provider,{value:p,children:n})}function S(){let e=(0,g.useContext)(_);if(!e)throw Error("Must be called within ErrorsProvider");return e}let k=p.z.object({id:p.z.string().optional().nullable(),title:p.z.string().optional().nullable(),message:p.z.string().optional().nullable(),displayFrequencyHours:p.z.number().optional().nullable()}),j={};function E(){let{registerSegmentTracker:e}=S(),{track:n}=(0,b.st)();return(0,g.useEffect)(()=>{e(n)},[e,n]),null}function L(){var e;let{id:n,title:t,message:r,displayFrequencyHours:o}=(0,i.iW)("claude_system_message",j,k),{account:l}=(0,m.YL)(),u=null!=(e=null==l?void 0:l.uuid)?e:"logged-out",c=(0,h.usePathname)(),[p,b]=(0,w.Vc)("dismissed-system-messages",{}),v=(0,g.useMemo)(()=>()=>b(e=>{let t=s()(e);return n&&f()(t,[u,n],Date.now()),t}),[b,u,n]);return(0,g.useMemo)(()=>{if(!l||(0,a.Xs)(l,!0)||"/download"===c||!n)return!1;let e=d()(p,[u,n]);return!e||"boolean"==typeof e||!!o&&Date.now()-e>=60*o*6e4},[l,n,u,p,o,c])?{currentSystemMessageId:n,currentSystemMessageTitle:t,currentSystemMessageContent:r,dismissCurrentSystemMessage:v}:{currentSystemMessageId:null,currentSystemMessageTitle:null,currentSystemMessageContent:null,dismissCurrentSystemMessage:()=>null}}},85717:(e,n,t)=>{t.d(n,{$f:()=>R,K6:()=>N,L5:()=>D,LP:()=>k,U5:()=>L,cI:()=>E,ef:()=>q,fb:()=>A,kJ:()=>j,qL:()=>z,vT:()=>P,y:()=>C,yy:()=>x,zF:()=>I,zH:()=>T});var r=t(68096),a=t(77186),i=t(1761),o=t(69916),l=t(71473),s=t(27062),u=t(77101),d=t(90119),c=t(21036),f=t(87606),h=t(62942),g=t(7620),p=t(46760),b=t(98251),m=t(45564),v=t(93049),y=t(91768),w=t(40459);let _="gdrive_success",x=()=>{let e=(0,i.mV)(),{data:n}=(0,y.LN)(),t=!!(Array.isArray(n)&&n.find(e=>e.type===u.v8.GDRIVE&&e.enabled));return!e||t},S=()=>{let{value:e}=(0,s.fS)("kingfisher_enabled"),n=(0,c.useLayer)("trials_freemium").get("free_integrations",!1);return e||n},k=()=>{let e=x(),n=S();return!!(!w.env.NEXT_PUBLIC_DISABLE_GDRIVE_INTEGRATION&&n&&e)},j=()=>{let{account:e,activeOrganization:n}=(0,i.YL)(),t=null==n?void 0:n.uuid,r=k(),{data:o,isFetched:s}=(0,a.Sk)("/api/organizations/".concat(t,"/sync/mcp/drive/auth"),{queryKey:[l.jR,{accountUUID:null==e?void 0:e.uuid,orgUUID:t}],enabled:r,staleTime:3e5});return{isAuthenticated:r&&!!(null==o?void 0:o.is_authenticated),isFetched:s}},E=function(){let{callerIdentifier:e,handleAuthSuccess:n,pathname:t,queryString:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isAuthenticated:s,isFetched:u}=j(),{addSuccess:c}=(0,o.Y)(),b=(0,p.A)(),{dropdownToOpen:v,clearCallerIdentifier:w}=(0,m.t)(),x=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null==n||n(e),c(b.formatMessage({defaultMessage:"Successfully connected to Google Drive",id:"7RI6njc31e"}))},S=(e=>{let{callerIdentifier:n,pathname:t,queryString:r}=e,o=(0,h.usePathname)(),{account:s,activeOrganization:u}=(0,i.YL)(),c=null==s?void 0:s.uuid,p=null==u?void 0:u.uuid,b=k(),m=(0,f.useQueryClient)(),v=(0,d.V)(),w=(0,h.useSearchParams)(),{mutate:x}=(0,a.L2)("/api/organizations/".concat(p,"/sync/mcp/drive/auth/start"),"POST",{enabled:b,onSuccess:e=>{window.location.href=e.redirect_url}}),S=(0,g.useRef)(!1);return()=>{if(!b)return;let e="".concat(_,"=").concat(n).concat(r?"&".concat(r):""),a=(0,y.dH)({pathname:t||o,searchParams:w,queryString:e,isClaudeApp:v});if(m.invalidateQueries({queryKey:[l.jR,{accountUUID:c,orgUUID:p}]}),v)return void window.open("/settings/connectors?open_in_browser=1&auth_start=gdrive&origin=".concat(a));S.current||(S.current=!0,x({pre_auth_state:{origin:a},redirect_uri:new URL("/connect/mcp/drive/callback",window.location.origin).toString()}))}})({callerIdentifier:e,pathname:t,queryString:r});return(0,y.FZ)({callerIdentifier:e,successParam:_,handleOpen:x}),(0,g.useEffect)(()=>{e&&v===e&&(null==n||n(!0),w())},[v,n,e,w]),{isDriveAuthenticated:s,initDriveAuth:S,handleDriveTrigger:x,isFetched:u}},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,i.YL)(),r=null==n?void 0:n.uuid,o=null==t?void 0:t.uuid,s=k(),u=(0,f.useQueryClient)(),{mutate:d}=(0,b.ih)();return(0,a.L2)("/api/organizations/".concat(o,"/sync/mcp/drive/auth"),"DELETE",{enabled:!!(t&&s),...e,onSuccess:function(){for(var n,t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];u.invalidateQueries({queryKey:[l.jR,{accountUUID:r,orgUUID:o}]}),d({}),null==(n=e.onSuccess)||n.call(e,...a)}})},C=e=>{let{documentId:n}=e,{account:t,activeOrganization:r}=(0,i.YL)(),o=null==t?void 0:t.uuid,s=null==r?void 0:r.uuid,u=k(),d=(0,f.useQueryClient)(),c=(0,a.Sk)("/api/organizations/".concat(s,"/sync/mcp/drive/document/").concat(n,"?include_content=false"),{queryKey:[l.QB,{accountUUID:o,orgUUID:s,documentId:n}],enabled:u,meta:{noToast:!0}}),h=c.isError;return(0,g.useEffect)(()=>{h&&d.invalidateQueries({queryKey:[l.jR,{accountUUID:o,orgUUID:s}]})},[d,h,o,s]),c};function I(e){let{uri:n}=e,{data:t,isLoading:r}=C({documentId:n});return{title:null==t?void 0:t.title,isLoading:r}}let z=e=>{let{account:n,activeOrganization:t}=(0,i.YL)(),r=null==n?void 0:n.uuid,o=null==t?void 0:t.uuid,s=k(),u=(0,g.useMemo)(()=>e.map(e=>"/api/organizations/".concat(o,"/sync/mcp/drive/document/").concat(e)),[e,o]),d=(0,g.useMemo)(()=>({queryKey:e.map(e=>[l.qM,{accountUUID:r,orgUUID:o,documentId:e}]),enabled:s,meta:{noToast:!0}}),[e,r,o,s]);return(0,a._i)(u,d)},T=e=>{let{account:n,activeOrganization:t}=(0,i.YL)(),r=null==n?void 0:n.uuid,o=null==t?void 0:t.uuid,s=k(),u=(0,v.bI)(),{data:d,isSuccess:c,isLoading:f}=(0,a.Sk)("/api/organizations/".concat(o,"/sync/mcp/drive/recents"),{queryKey:[l.zu,{accountUUID:r,orgUUID:o}],enabled:e&&s,meta:{noToast:!0}});return(0,g.useEffect)(()=>{if(c&&d){let e=d.map(e=>{let{uri:n,title:t}=e;return{uri:n,title:t}});(0,v.Ac)(e)}},[c,d]),{recentDriveDocs:c?d:u,isLoading:f}},A=()=>{let e=S(),{value:n}=(0,s.fS)("apps_use_bananagrams"),t=(0,c.useLayer)("trials_freemium").get("free_integrations",!1);return e&&n||t},N=()=>{let e=k(),n=A();return e&&n&&!w.env.NEXT_PUBLIC_DISABLE_GDRIVE_INTEGRATION},R=e=>{var n;let t=N(),{account:r}=(0,i.YL)();return!!t&&(e?!!(null==e||null==(n=e.conversationSettings)?void 0:n.enabled_bananagrams):!!(null==r?void 0:r.settings.enabled_bananagrams))},D=()=>(0,s.fS)("rag_prototype").value,P=()=>{let e=N(),n=(0,i.mV)(),{data:t}=(0,y.LN)(),{account:r}=(0,i.YL)(),a=D();return!!e&&!!a&&(n?!!(Array.isArray(t)&&t.find(e=>{var n;return e.type===u.v8.GDRIVE&&e.enabled&&(null==(n=e.config)?void 0:n.allow_indexing)})):!!(null==r?void 0:r.settings.enabled_gdrive_indexing))},q=()=>{let{account:e}=(0,i.YL)(),{mutate:n}=(0,r.Jy)(),{mutate:t}=(0,b.Bg)();return{toggleDriveSearchAndIndexingEnabled:r=>{var a;let{indexingEnabled:i,searchEnabled:o,dismissBanner:l}=r,s=l||!!i;i&&t({}),n({...null==e?void 0:e.settings,...void 0!==i?{enabled_gdrive_indexing:i}:null,...void 0!==o||!0===i?{enabled_bananagrams:null!=i?i:o}:null,...s?{dismissed_claudeai_banners:[...(null==e||null==(a=e.settings)?void 0:a.dismissed_claudeai_banners)||[],{banner_id:"drive_indexing_enablement_2/11_1",dismissed_at:new Date().toISOString()}]}:null})}}}},90510:(e,n,t)=>{t.d(n,{J:()=>o});var r=t(32987),a=t(7620);function i(e){return function(n){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];let l=n.map(e=>e.replace(/\n/g,"").trim()),s=a.forwardRef((n,t)=>{let{className:o,...s}=n,u=i.map(e=>"function"==typeof e?e(n):e),d=Object.fromEntries(Object.entries(s).filter(e=>{let[n]=e;return!n.startsWith("$")}));return a.createElement(e,{...d,ref:t,className:(0,r.A)(l,u,"string"==typeof o?o:"")})});return s.displayName="string"==typeof e?e:e.displayName,s}}function o(e){return i(e)}o.a=i("a"),o.aside=i("aside"),o.button=i("button"),o.main=i("main"),o.div=i("div"),o.form=i("form"),o.nav=i("nav"),o.fieldset=i("fieldset"),o.header=i("header"),o.h1=i("h1"),o.h2=i("h2"),o.h3=i("h3"),o.h4=i("h4"),o.h5=i("h5"),o.th=i("th"),o.td=i("td"),o.input=i("input"),o.label=i("label"),o.p=i("p"),o.section=i("section"),o.span=i("span"),o.li=i("li"),o.table=i("table"),o.thead=i("thead"),o.tbody=i("tbody"),o.tr=i("tr")},91961:(e,n,t)=>{t.d(n,{Fr:()=>a,K7:()=>f,Nj:()=>h,cX:()=>o,fJ:()=>c,lh:()=>g,uF:()=>u,vm:()=>l});var r=t(7620);function a(){return window.innerWidth<640}let i=/(macintosh|macintel|macppc|mac68k|macos)/i;function o(){let e=window.navigator.userAgent.toLowerCase();return i.test(e)}function l(){return(0,r.useMemo)(()=>/(macintosh|macintel|macppc|mac68k|macos)/i.test(window.navigator.userAgent),[])}let s=/(win32|win64|windows|wince)/i;function u(){let e=window.navigator.userAgent.toLowerCase();return s.test(e)}let d=/(iphone|ipad|ipod|android|mobile|webos)/i;function c(){let e=window.navigator.userAgent.toLowerCase();return d.test(e)}function f(e){(0,r.useEffect)(()=>{let n=document.title;return e&&(document.title="".concat(e," - Claude")),()=>{document.title=n}},[e])}let h=e=>{try{return new URL(e).hostname.split(".").slice(-2).join(".")}catch(e){return}},g=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,t=[16,32,48,64,96,128].find(e=>e>=2*n)||128,r=h(e);if(r)return"https://www.google.com/s2/favicons?domain=".concat(r,"&sz=").concat(t)}}}]);