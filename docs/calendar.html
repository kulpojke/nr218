<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Syllabus - NR 218 - Introduction to GIS - Fall 2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-b31e5964e9981dea50e926b314bcc293.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Syllabus - NR 218 - Introduction to GIS - Fall 2025</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><a href="#fall-term-calendar-2025">Jump to class calendar</a></p>
<section id="class-details" class="level2">
<h2 class="anchored" data-anchor-id="class-details">Class Details</h2>
<ul>
<li>Building 180 (Baker Hall)<br>
Room 230</li>
<li>Times:
<ul>
<li><span style="font-size:0.8em">Monday:</span><br>
<span style="font-size:0.8em">5:10 - 6:00 Lecture</span><br>
<span style="font-size:0.8em">6:10 - 9:00 Lab</span><br>
</li>
<li><span style="font-size:0.8em">Wednesday</span><br>
<span style="font-size:0.8em">6:10 - 9:00 Lab</span></li>
</ul></li>
</ul>
</section>
<section id="instructor-details" class="level2">
<h2 class="anchored" data-anchor-id="instructor-details">Instructor Details</h2>
<ul>
<li>Michael Huggins</li>
<li>Office Hours:
<ul>
<li>Building 72 (Plant Conservatory) Room 107<br>
Mondays 2:30 - 4:30s</li>
</ul></li>
</ul>
</section>
<section id="learning-goals" class="level2">
<h2 class="anchored" data-anchor-id="learning-goals">Learning Goals</h2>
<ul>
<li>Analyze spatial data<br>
</li>
<li>Create maps using geospatial software</li>
<li>Produce quality graphics</li>
<li>Apply skills in remote sensing, GIS, and data science to solve a problem of your own design</li>
<li>Understand basic principles of GIS</li>
</ul>
</section>
<section id="project-assignments" class="level2">
<h2 class="anchored" data-anchor-id="project-assignments">Project Assignments</h2>
<p>This course centers on a series of 4 projects using different types of GIS data. The projects build on one another and you will learn new skills for each project. Plenty of class time will be spent on project work. Each student should hand in their own projects. Projects are due every other week (see <a href="#fall-term-calendar-2025">calendar</a> for dates). Late assignments will be deducted 5% per day late.</p>
<p>There is also a final project as well as an exam.</p>
<p>For your final project you will propose a novel GIS question and collect or analyze data to answer it.</p>
</section>
<section id="assignment-weight" class="level2">
<h2 class="anchored" data-anchor-id="assignment-weight">Assignment Weight</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 61%">
<col style="width: 23%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th>Assignment</th>
<th>Percentage of Grade</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Project 1</td>
<td>10</td>
<td>Mapping</td>
</tr>
<tr class="even">
<td>Project 2</td>
<td>10</td>
<td>Vector Data Analysis</td>
</tr>
<tr class="odd">
<td>Project 3</td>
<td>10</td>
<td>Raster Data Analysis</td>
</tr>
<tr class="even">
<td>Project 4</td>
<td>15</td>
<td>Remote Sensing, Image Analysis, and Modeling</td>
</tr>
<tr class="odd">
<td>Final Project</td>
<td>25</td>
<td><embed src="final_proj.md" class="img-fluid"></td>
</tr>
<tr class="even">
<td>Exam</td>
<td>20</td>
<td>Will be hard, but curved</td>
</tr>
<tr class="odd">
<td>Participation</td>
<td>10</td>
<td>Will be based on <img src="#attendance-policy.png" class="img-fluid" alt="exit tickets"> and engagement</td>
</tr>
<tr class="even">
<td>Assignment 0</td>
<td>1 (bonus)</td>
<td>Easy bonus points</td>
</tr>
</tbody>
</table>
</section>
<section id="grading" class="level2">
<h2 class="anchored" data-anchor-id="grading">Grading</h2>
<p>A: ≥ 90%<br>
B: ≥ 80%<br>
C: ≥ 70%<br>
D: ≥ 60%<br>
F: &lt; 60%</p>
<p>Total 100%</p>
<p>Note: Grading is not curved (Except exam).</p>
</section>
<section id="assignment-submission-policy" class="level2">
<h2 class="anchored" data-anchor-id="assignment-submission-policy">Assignment Submission Policy</h2>
<p>Assignments (except the final project) will be submitted on Canvas. Students are allowed a 48-hour ‘no questions’ asked grace period on assignment submissions. You do not need to give any reason as to why your submission is late, as long as it is submitted within 48 hours of the deadline.</p>
</section>
<section id="attendance-policy" class="level2">
<h2 class="anchored" data-anchor-id="attendance-policy">Attendance Policy</h2>
<p>Before leaving for each class you will need to turn in an “exit ticket”. The exit ticket is simply a short answer to a question that will given in class. The exit ticket will let me know that you were in class, and help me to gauge how well students are absorbing the material. You are allowed 3 unexcused absences. Beyond 3 unexcused absences, you will be deducted 2% of the total grade for each unauthorized absence.</p>
</section>
<section id="academic-integrity" class="level2">
<h2 class="anchored" data-anchor-id="academic-integrity">Academic Integrity</h2>
<p>All students should be familiar with and adhere to the university’s academic integrity policy, which can be found here: https://osrr.calpoly.edu/academic-integrity</p>
</section>
<section id="use-of-ai" class="level2">
<h2 class="anchored" data-anchor-id="use-of-ai">Use of AI</h2>
<p>AI generated text <strong>may not be used</strong> for any writing.</p>
<p>Students can seek AI assistance for project work, but it is important to consider that AI will make you stupid and waste your time! + Depending on AI prevents development of critical thinking, writing, and problem-solving skills + AI will sometimes lead you down a terrible, deep rabbit hole of confusion + Getting quick answers without working through problems will leave gaps in foundational knowledge needed for advanced coursework + The struggle of working through difficult concepts is often where the most valuable learning occurs</p>
<p>That is not to say LLMs are never useful or appropriate to use, but you need to know their limitations.</p>
</section>
<section id="textbook" class="level2">
<h2 class="anchored" data-anchor-id="textbook">Textbook</h2>
<p>We will read Essentials of Geographic Information Systems during this course. A free and online version of the textbook can be found <a href="https://saylordotorg.github.io/text_essentials-of-geographic-information-systems">here</a></p>
</section>
<section id="tutorials" class="level2">
<h2 class="anchored" data-anchor-id="tutorials">Tutorials</h2>
<p>We will refer to a number of tutorial videos which describe QGIS processing. These will come primarily from two sources:</p>
<p><a href="https://www.qgistutorials.com/en/index.html">Ujaval Gandhi’s QGIS Tutorials and Tips</a></p>
<p><a href="https://docs.qgis.org/3.34/en/docs/training_manual/index.html">QGIS Training Manual</a></p>
<p>There are many other helpful sources of information on GIS Software</p>
<p><a href="https://courses.spatialthoughts.com/">Spatial Thoughts</a>introduction-to-qgis.html</p>
<p><a href="https://docs.qgis.org/3.40/en/docs/">A Gentle Introduction to GIS</a>gentle_gis_introduction/index.html</p>
</section>
<section id="fall-term-calendar-2025" class="level1">
<h1>Fall Term Calendar 2025</h1>
<p>Here’s the table with the Week column containing just the integer week values:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Date</th>
<th>Week</th>
<th>Description</th>
<th>Reading</th>
<th>Due Dates</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>September 22</td>
<td>1</td>
<td>What is GIS Why is it important</td>
<td>Chapters 1 and 2</td>
<td></td>
</tr>
<tr class="even">
<td>September 24</td>
<td>1</td>
<td>Basic GIS Concepts Scale, Coordinate systems, and Map Projections</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>September 29</td>
<td>2</td>
<td>Scale, Coordinate systems, and Map Projections / Spatial Data Models and Formats</td>
<td>chapters 3 and 4</td>
<td></td>
</tr>
<tr class="even">
<td>October 1</td>
<td>2</td>
<td>Vector and Raster Data</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>October 6</td>
<td>3</td>
<td>Finding Acquiring, Creating, and Editing GIS Data</td>
<td>chapters 5 and 6</td>
<td><a href="project_1.html">Project 1</a></td>
</tr>
<tr class="even">
<td>October 8</td>
<td>3</td>
<td>GeoProcessing and Vector Operations</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>October 13</td>
<td>4</td>
<td>Remotely Sensed Data</td>
<td>chapters 7 and 8</td>
<td></td>
</tr>
<tr class="even">
<td>October 15</td>
<td>4</td>
<td>Spectral Indices, Elevation Data</td>
<td></td>
<td><a href="./final_proj.html">Final Project Brainstorm Due</a></td>
</tr>
<tr class="odd">
<td>October 20</td>
<td>5</td>
<td>Spatial Joins, Final Project Discussion</td>
<td>chapters 9 and 10</td>
<td><a href="project_2.html">Project 2</a></td>
</tr>
<tr class="even">
<td>October 22</td>
<td>5</td>
<td>Spatial Analysis Introduction, Final Project Group Discussions</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>October 27</td>
<td>6</td>
<td>Spatial Analysis: Map Algebra, Reprojection, Resampling</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>October 29</td>
<td>6</td>
<td>Raster <span class="math inline">\(\times\)</span> Vector Operations, Zonal Statistics, Point Sampling</td>
<td></td>
<td><a href="./final_proj.html">Final Project Outline Due</a></td>
</tr>
<tr class="odd">
<td>November 3</td>
<td>7</td>
<td>Rasterizing by Attributes, Georeferencing, Statistics 101</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>November 5</td>
<td>7</td>
<td>ArcGIS Pro, Spreadsheets</td>
<td></td>
<td>Project 3</td>
</tr>
<tr class="odd">
<td>November 10</td>
<td>8</td>
<td>Web Mapping, Field Data Collection: Mobile sensors and edge devices</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>November 11</td>
<td>8</td>
<td>Academic holiday - Veterans Day observed</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>November 12</td>
<td>8</td>
<td>No Class</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>November 17</td>
<td>9</td>
<td>Advanced Topics: Photogrammetry, Radar, Interferometry</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>November 19</td>
<td>9</td>
<td>Real World Applications and Careers - Guest Lectures</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>November 24</td>
<td></td>
<td>Fall Break</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>November 26</td>
<td></td>
<td>Fall Break</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>December 1</td>
<td>10</td>
<td>Project 4 Presentations</td>
<td></td>
<td>Project 4</td>
</tr>
<tr class="odd">
<td>December 3</td>
<td>10</td>
<td>Exam. Final Project Presentations</td>
<td></td>
<td><a href="./final_proj.html">Final Project</a></td>
</tr>
</tbody>
</table>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>