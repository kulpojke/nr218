# Spatial Data Models and Formats

## Data Overview

::: {.r-stack}
::: {.fragment .fade-in-then-out}

What are Data?

::: {style="font-size:0.7em"}
- “Facts, measurements, and characteristics of something of interest.”
- “Facts and statistics collected together for reference or analysis.”
:::

What is Information?

::: {style="font-size:0.7em"}
- “Facts provided or learned about something or someone.”
- “Knowledge and insights that are acquired through the analysis of data.”
:::

:::

::: {.fragment .fade-in}

What are Spatial Data?

::: {style="font-size:0.7em"}
- “Data that describe the geographic and spatial aspects of phenomena.”
- “Facts and statistics collected together for reference or analysis.”
:::

What are Metadata?

::: {style="font-size:0.7em"}
- Data about the data 
- Ex: units, what instruments were used, who/what/when/where/how the data was collected
:::

:::
:::

## Data Types

+ Data can have different **types**

  ::: {style="font-size:0.7em"}
  + Ex: How might "population" data differ from "county" data?
  :::

+ The most common types of data available for use in a GIS are:

  ::: {style="font-size:0.7em"}
  + **Bools** - True / False statements (think off/on switch)
  + **Strings** - Alphanumeric text denoted by quotes (e.g. “Lake Tahoe”)
  + **Numbers** - numerical values (e.g. latitude/longitude coordinates)

    ::: {style="font-size:0.8em"}
    + **Integers (ints)** - numerical values (8 bit or 16 bit precision)
    + **Floating Point (float)** - negatives, decimal values (32 bit precision)
    :::
  
  :::

::: notes
Which of these dtypes do you think tends to be most memory intensive memory?
:::


## Continuous vs Discrete Data {.smaller}

+ **Continuous** data consists of numerical values
+ **Discrete** data consists of a limited number of possible values, groups, or categories
  + In some cases could be represented with integers
  + Could be some continuous quantity chopped into bins, e.g. income as "high". "middle", "low"

## Levels of Measurement

::: {.r-stack}

::: {.fragment .absolute .fade-out data-fragment-index="1" style="font-size:0.7em"}
+ **Nominal** - Names or identifiers of objects
+ **Ordinal** - Ranked categories based on a measure
+ **Ratio** - have a 0 value that indicates absence of the quantity of interest
+ **Interval** - have a regular scale, but not a meaningful 0 value
:::

::: {.fragment .absolute .fade-in-then-out data-fragment-index="1" style="font-size:0.7em"}

**Nominal** - Names or identifiers of objects

<span style="display:block; margin-left:1.5em;">e.g. Land Cover: "Oak Woodland", "Grassland", "Forest", etc...</span>

**Ordinal** - Ranked categories based on a measure

<span style="display:block; margin-left:1.5em;">e.g. Fire Hazard: "Low", "Medium", "High"</span>


:::


::: {.fragment .absolute .fade-in-then-out data-fragment-index="2" style="font-size:0.7em"}

**Ratio** -
Multiplication makes sense, e.g. 200 K is twice as hot as 100 K
$$
2 \times 100 \mathrm{K} = 200 \mathrm{K} 
$$

**Interval** -
Multiplication __does not__ make sense, e.g. 200°C is __not__ twice as hot as 100°C
$$
2 \times 100°\mathrm{C} \neq 200°\mathrm{C} 
$$

![](img/Kelvin_og_Celsius_temperaturskalaer.png)

::: {.attribution style="font-size:0.4em"}
Image Source: [wikimedia](https://upload.wikimedia.org/wikipedia/commons/c/3/Kelvin_og_Celsius_temperaturskalaer.png)
:::

:::

:::

::: notes
Which of these do you think would be discrete?  Which are Continuos? 
:::


## Geospatial Data Types: Vector vs. Raster {style="font-size:0.7em"}

::: {.figure style="text-align: center; margin: 0 auto;"}
  ![](img/vector_vs_raster.png){style="height: 500px;"}
:::

## Vector Data

::: {.r-stack}
::: {.fragment .fade-in-then-out}
::: {.columns}

::: {.column width = "40%"}
::: {style="font-size:0.7em"}
+ Can be described by points, lines, polygons
  + Ex: roads, rivers, train tracks, hiking trails, sidewalks, building footprints, county boundaries
+ NOT images, do NOT contain any pixels
+ The kind of data we've been working with so far
:::
:::

::: {.column width = "50%"}
::: {.figure style="text-align: right; margin: 0 auto;"}
![](img/vector_example.png){style="height: 500px;"}
:::
:::

:::
:::

::: {.fragment .fade-in-then-out}
::: {.columns}

::: {.column width = "40%"}
::: {style="font-size:0.7em"}
+ Often stored as tabular data files with geographic metadata
+ Points, lines, and polygons represent the spatial features
+ Topology describes the connectivity, area definition, and contiguity of interrelated points, lines, and polygon
:::
:::

::: {.column width = "50%"}
::: {.figure style="text-align: right; margin: 0 auto;"}
![](img/vector_table.png){style="height: 500px;"}
:::
:::

:::
:::

::: {.fragment .fade-in-then-out}
::: {.columns}

::: {.column width = "40%"}

**Points**

::: {style="font-size:0.7em"}
+ Zero-dimensional objects containing a **single coordinate pair.**
  + Ex: Lat, Lon (sometimes elevation) coordinates denoting a city, building, address, etc
+ X,Y (,Z) coordinates on a Cartesian plane (or Euclidean space)
:::

:::

::: {.column width = "50%"}
::: {.figure style="text-align: right; margin: 0 auto;"}
![](img/vector_example.png){style="height: 500px;"}
:::
:::

:::
:::

::: {.fragment .fade-in-then-out}
::: {.columns}

::: {.column width = "40%"}

**Lines**

::: {style="font-size:0.7em"}
+ One-dimensional objects composed of multiple, explicitly connected points. 
+ Lines have the property of length. 
+ Also called an “arc.”
:::

:::

::: {.column width = "50%"}
::: {.figure style="text-align: right; margin: 0 auto;"}
![](img/vector_example.png){style="height: 500px;"}
:::
:::

:::
:::

::: {.fragment .fade-in}
::: {.columns}

::: {.column width = "40%"}

**Polygons**

::: {style="font-size:0.7em"}
+ Two-dimensional features created by multiple lines to create a “closed” feature. 
+ First point on the first line segment is the same as the last point on the last line.
+ Can represent city boundaries, buildings, lakes, soils, etc. 
+ Have the properties of area and perimeter. 
:::
:::

::: {.column width = "50%"}
::: {.figure style="text-align: right; margin: 0 auto;"}
![](img/vector_example.png){style="height: 500px;"}
:::
:::

:::
:::
:::

## Structuring Vector Data

::: {.r-stack}
::: {.fragment .fade-in-then-out}

+ There are several ways to define relationships between vector data:
  + Feature based: The **“Spaghetti Model”**

    ::: {style="font-size:0.8em"}
    + Each feature is a long string of coordinates
    + No relationships between features
    :::

  + Structured: The **“Topological Model”**

    ::: {style="font-size:0.8em"} 
    + Enforced relationships between features
    :::

:::

::: {.fragment .fade-in}

![](img/spaghetti_vs_topo.png){style="height: 600px;"}

:::
:::

## Some Common Vector File Formats {style="font-size:0.4em"}

| Format | File Extension | Stores Topology | Binary / Human Readable | Notes |
|--------|---------------|-----------------|------------------------|-------|
| Shapefile | .shp (+ .shx, .dbf, .prj) | No | Binary | Common, but aging |
| GeoJSON | .geojson, .json | No | Human Readable | Web-friendly, text-based |
| GeoPackage | .gpkg | No | Binary | Modern SQLite-based format |
| KML/KMZ | .kml, .kmz | No | Human Readable (.kml) / Binary (.kmz) | Google Earth format |
| TopoJSON | .topojson | Yes | Human Readable | json, Encodes topology |
| PostGIS | (database) | Yes (optional) | Binary | PostgreSQL spatial extension |
| File Geodatabase | .gdb | Yes (optional) | Binary | ESRI proprietary format, annoying to use in other software |
| GeoParquet | .parquet | No | Binary | Column-oriented, efficient |


## How to open gdb in QGIS {.smaller}
1. Download  3D Hydrography Program data for the CONUS

    [gdb](https://prd-tnm.s3.amazonaws.com/StagedProducts/Hydrography/3DHP/Annual/GDB/3dhp_all_GDB_FY25_CONUS_20250313/3dhp_all_CONUS_20250313_GDB.zip)   
    [metadata](https://thor-f5.er.usgs.gov/ngtoc/metadata/waf/hydrography/3dhp/annual/3dhp_all_CONUS_20250313_GDB.xml)(Optional)

2.  Unzip the zip. (Unless you plan to use it later, you can just unzip it into the Downloads folder where the zip sits)

3. Press `ctrl-shift-v` (`cmd-shift-v` on Mac)  
    a. At the top, under "source type", check the directory box.  
    b. Browse for and select `3dhp_all_CONUS_20250313_GDB.gdb` where you unzipped it.
    c. Click Add


## Discussion

::: {.incremental}
::: {style="font-size:0.7em"}
+ What vector type (point, line, or polygon) best represents the following features: 

  ::: {.incremental}
  ::: {style="font-size:0.8em"}
  + state boundaries, 
  + telephone poles, 
  + buildings, 
  + cities, 
  + stream networks, 
  + mountain peaks, 
  + soil types,
  + flight tracks?
  :::
  :::

+ Which of these features can be represented by multiple vector types? 
+ What conditions might lead you choose one vector type over another?

:::
:::


## Raster Data

![](img/amazon1.gif)

## Raster Data

::: {.r-stack}
::: {.fragment .fade-in-then-out}
::: {.columns}

::: {.column width = "40%"}
::: {style="font-size:0.7em"}
+ Derived from a grid-based system of contiguous cells containing specific attribute information.
+ The **spatial resolution** of a raster dataset represents a measure of the precision or detail of the displayed information.
+ Widely used by technologies such as digital images and LCD monitors.
:::
:::

::: {.column width = "50%"}
::: {.figure style="text-align: right; margin: 0 auto;"}
![](img/raster_example1.png)
:::
:::

:::
:::

::: {.fragment .fade-in-then-out}
::: {.columns}

::: {.column width = "40%"}
::: {style="font-size:0.7em"}
+ Images, stacks of images (satellite / drone image)
  + *Raster (latin) means “screen”!*
+ Grids of numbers
+ Things with pixels! 
+ If it's pixelated: 
  + It’s a raster
+ If it's a photo: 
  + It’s a raster
+ If it’s a digital image 
  + It’s a raster!

:::
:::

::: {.column width = "50%"}

![](img/raster_example2.png){width=600px}

:::

:::
:::

::: {.fragment .fade-in}
::: {.columns}

::: {.column width = "40%"}
::: {style="font-size:0.7em"}
+ The **spatial resolution** of a raster dataset represents a measure of the precision or detail of the displayed information.
  + AKA pixel size
  + Ex: 1mm, 1cm, or 1m
+ So when you hear that a camera has N megapixels - this just means it has many millions of pixels 

:::
:::

::: {.column width = "50%"}
::: {.figure style="fig-align: center;"}
![](img/raster_example3.png){style="background-color:white;"}
:::
:::

:::
:::

:::

## Spatial Resolution

::: {.r-stack}
::: {.fragment .fade-in-then-out}

::: {style="font-size:0.7em"}
The **spatial resolution** of a raster dataset represents a measure of the accuracy or detail of the displayed information.
:::

![](img/spatial_resolution.png){fig-align="center"}

:::

::: {.fragment .fade-in}

::: {style="font-size:0.7em"}
The **spatial resolution** of a raster dataset represents a measure of the accuracy or detail of the displayed information.
:::

![](img/spatial_resolution2.png){fig-align="center"}

:::
:::


## Spectral Resolution
::: {.r-stack}
::: {.fragment .fade-in-then-out}
![](img/spectrumZoomed.png)

::: {.attribution style="font-size:0.4em"}
Image Source: [Neon](https://www.neonscience.org/resources/learning-hub/tutorials/hyper-spec-intro)
:::
:::


::: {.fragment .fade-in-then-out}
![](img/FWHM2.png)

::: {.attribution style="font-size:0.4em"}
Image Source: [Neon](https://www.neonscience.org/resources/learning-hub/tutorials/hyper-spec-intro)
:::
:::


::: {.fragment .fade-in-then-out}
![](img/RGB-bands-raster-stack.jpg)

::: {.attribution style="font-size:0.4em"}
Image Source: [Neon](https://www.neonscience.org/resources/learning-hub/tutorials/hyper-spec-intro)
:::
:::

::: {.fragment .fade-in-then-out}
![](img/landsat_v_sentinel-2-1.png)

::: {.attribution style="font-size:0.4em"}
Image Source: [NASA](https://landsat.gsfc.nasa.gov/article/sentinel-2a-launches-our-compliments-our-complements/)
:::
:::

::: {.fragment .fade-in-then-out}
![](img/Hyperspectral_image_data_cube.jpg){style="width: 70%; max-width: 95%; max-height: 70vh;"}

::: {.attribution style="font-size:0.4em"}
Image Source: University of Texas at Austin, Center for Space Research via [ESA](https://www.esa.int/ESA_Multimedia/Images/2014/04/Hyperspectral_image_data_cube)
:::
:::

:::
